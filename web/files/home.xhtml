<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">

     <h:head>


       
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="GOOGLEBOT" content="index follow"/>
        <meta name="apple-mobile-web-app-capable" content="yes" />

        <title>GTFS TO MAP</title>
        
           <script src='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:relative; top:0; bottom:0; width:100%; }
</style>    
      <style>
.menu-ui {
  background:#fff;
  position:absolute;
  top:10px;right:10px;
  z-index:1;
  border-radius:3px;
  width:120px;
  border:1px solid rgba(0,0,0,0.4);
  }
  .menu-ui a {
    font-size:13px;
    color:#404040;
    display:block;
    margin:0;padding:0;
    padding:10px;
    text-decoration:none;
    border-bottom:1px solid rgba(0,0,0,0.25);
    text-align:center;
    }
    .menu-ui a:first-child {
      border-radius:3px 3px 0 0;
      }
    .menu-ui a:last-child {
      border:none;
      border-radius:0 0 3px 3px;
      }
    .menu-ui a:hover {
      background:#f8f8f8;
      color:#404040;
      }
    .menu-ui a.active {
      background:#3887BE;
      color:#FFF;
      }
      .menu-ui a.active:hover {
        background:#3074a4;
        }
        #shapes {
          marker-fill :#813;
        }
</style>

        <!-- =========================================
        CSS
        ========================================== -->
        <h:outputStylesheet library="css" name="style.css"  />
        <!-- http://5.153.23.18/~arduinom/ -->
      <link rel="stylesheet" media="screen" href="http://5.153.23.18/~arduinom/ressources/css/bootstrap.min.css" />
        <link rel="stylesheet" media="screen" href="http://5.153.23.18/~arduinom/ressources/css/style.css"/>
	
        <!-- =========================================
        Head Libs
        ========================================== -->
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/vendor/modernizr.custom.js"></script>

    <!-- /head -->


 </h:head>
   

    <!-- =========================================
    body
    ========================================== -->
   <h:body> 
    #{userData.init()}
 




        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->




        <!-- =========================================
        Header
        ========================================== -->
        <!-- header -->
        <section id="header">


            <!-- top-header
            ========================================== -->
            <div id="top-header">
                <!-- container -->
                <div class="container">
                    <!-- row -->
                    <div class="row">

                    </div><!-- /row -->
                </div><!-- /container -->
            </div><!-- /top-header -->


            <!-- Menu
            ========================================== -->
            <!-- nav-wrapper -->
            <div id="nav-wrapper">
                <!-- navbar -->
                <div class="navbar">
                    <!-- container -->
                    <div class="container">
                        <!-- row -->
                        <div class="row">

                            <!-- col-md-12 -->
                            <div class="col-md-12">

                                <!-- navbar-header -->
                                <div class="navbar-header">

                                    <!-- Mobile Menu -->
                                    <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
                                        <i class="fa fa-bars"></i>
                                    </button><!-- / mobile Menu -->

                                    <!-- logo -->
                                    <a href="#header" class="navbar-brand home-sec" title="gtfs to map">
                                        <img src="http://5.153.23.18/~arduinom/ressources/images/logo.png" alt="logo" width="240" height="90" />
                                    </a><!-- /logo -->

                                </div><!-- /navbar-header -->

                                <!-- navbar-collapse -->
                                <div class="navbar-collapse collapse">

                                    <!-- nav -->

                                </div><!-- /navbar-collapse -->

                            </div><!-- /col-md-12 -->

                        </div><!-- /row -->
                    </div><!-- /container -->
                </div><!-- /navbar -->
            </div><!-- /nav-wrapper -->


        </section><!-- /header -->




        <!-- =========================================
        Contact Section
        ========================================== -->
        <!-- contact-section -->
        <section id="contact-section">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">


                    <!-- col-md-12 -->
                    <div class="col-md-12">

                        <!-- section-title -->
                        <div class="section-title">

                            <!-- main-title -->
                            <div class="main-title">
                                #{userData.agency}
                            </div>
                             <div class="desc-title">
                                Veuillez choisir votre ligne et votre station pour les afficher sur la carte
                            </div><!-- /main-title -->

                            <!-- desc-title -->
                            <div class="desc-title">
                                 
                            </div><!-- /desc-title -->

                        </div><!-- /section-title -->

                    </div><!-- /col-md-12 -->


                    <!-- form -->
                  
                        <h:form  styleClass="contactForm">
                        <!-- col-md-6 -->
                        <div class="col-md-6">

                           
                            <!-- Email -->
                            <div data-uk-scrollspy="{cls:'uk-animation-slide-left', delay:700}">
                               <h:selectOneMenu value="#{userData.shapeid}" >
    <f:selectItems value="${userData.shapeslist}" var="shape" itemValue="${shape.shape_id}" itemLabel="${shape.route_long_name}" />
</h:selectOneMenu>

                            </div><!-- /Email -->
 <div data-uk-scrollspy="{cls:'uk-animation-slide-right', delay:900}">
    <h:commandButton action="#{userData.searchShape}" styleClass="submit"  value="afficher la ligne"></h:commandButton>
                                
                            </div><!-- /Submit button -->

                           
                        </div><!-- /col-md-6 -->
                       <!-- </h:form>
 <h:form  styleClass="contactForm"> -->

                        <!-- col-md-6 -->
                        <div class="col-md-6">

                            <!-- Message -->
                            <div data-uk-scrollspy="{cls:'uk-animation-slide-right', delay:700}">
                                 <h:selectOneMenu value="#{userData.stopid}" >
    <f:selectItems value="${userData.stoplist}" var="stop" itemValue="${stop.stop_id}" itemLabel="${stop.stopname}" />
</h:selectOneMenu>
                            </div><!-- /Message -->

                            <!-- Submit button -->
                            <div data-uk-scrollspy="{cls:'uk-animation-slide-right', delay:900}">
                                <h:commandButton action="#{userData.searchStops}" styleClass="submit"  value="afficher la station"></h:commandButton>
                            </div><!-- /Submit button -->

                        </div><!-- /col-md-6 -->

                    </h:form><!-- /form -->


                </div><!-- /row -->
            </div><!-- /container -->
        </section><!-- /section -->


<div class="main-title">
                                #{userData.stp.stopname}
                            </div>
  <div class="desc-title">
                                cliquer sur le marker pour voir les horaires concernant cette station
                            </div>
        <!-- =========================================
        Map Section
        ========================================== -->
        <!-- map-section -->
        <section id="map-section">

            <!-- map -->
            <div id="map"></div>


        </section><!-- /section -->




        <!-- =========================================
        Footer Section
        ========================================== -->
        <!-- footer-section -->
        <section id="footer-section">
           
        </section><!-- /section -->




        <!-- =========================================
        java script
        ========================================== -->
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/vendor/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/vendor/bootstrap.min.js"></script>
      
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.easing.1.3.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/rs-plugin/js/jquery.themepunch.plugins.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.parallax-1.1.3.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.isotope.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/waypoints.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.countTo.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/fancybox/jquery.mousewheel-3.0.6.pack.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/fancybox/jquery.fancybox.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/fancybox/helpers/jquery.fancybox-media.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/uikit.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/owl/owl.carousel.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.knob.js"></script>
        
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/jquery.nicescroll.min.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/plugins/retina-1.1.0.js"></script>
        <script type="text/javascript" src="http://5.153.23.18/~arduinom/ressources/js/Safandi.js"></script>

        <!--[if lt IE 9]>
            <script src="js/plugins/html5shiv.js"></script>
            <script src="js/plugins/selectivizr.js"></script>
        <![endif]-->

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
      

  <script>
L.mapbox.accessToken = 'pk.eyJ1IjoiY29tZTE5MTIiLCJhIjoiNHFSbndDWSJ9.hOAlxix32OmQztim59W19Q';
var map = L.mapbox.map('map', 'come1912.j9o9cijf').setView([38.805786, -77.06258], 11);
//map.addControl(L.mapbox.infoControl().addInfo('foo'));
map.addControl(L.mapbox.legendControl());

// Add each wms layer using L.tileLayer.wms
if(#{userData.indshape}==0){
    alert("ddsd");
}
else if (#{userData.indshape}==1){
var shapes = L.tileLayer.wms(#{userData.wms}, {
    format: 'image/png',
    transparent: true,
    layers: #{userData.shapelayer},
      style: L.mapbox.simplestyle.style
      
}).addTo(map);
}


if(#{userData.ind}==0){
    
}
else if (#{userData.ind}==1){
    
var stop_name="#{userData.stp.stopname}";
     L.marker([#{userData.stp.latitude},#{userData.stp.longitude}], {
            
            icon: L.mapbox.marker.icon({
                'marker-size': 'large',
                'marker-symbol': 'rail',
                'marker-color': '#fa0'
            } )
           
        }).bindPopup('<a href="times.xhtml">'+stop_name+'</a>').addTo(map);  
 }  
 


     


// Layer switcher


//alert(#{sessionScope['stopsess'].latitude});
    
 
</script>


   </h:body><!-- /body -->
</html><!-- /html -->